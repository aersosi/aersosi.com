---

---

<script>
	import { throttle } from "../throttle";

	document.addEventListener("DOMContentLoaded", () => {
		const mainNav = document.getElementById("mainNav");
		const SCROLL_THRESHOLD = 48;

		if (!mainNav) return;

		// Define classes to add/remove based on scroll position
		const scrolledClasses = [
			"py-3",
			"bg-base-100/70",
			"dark:bg-base-800/70",
			"backdrop-blur-md",
			"shadow-md",
		];

		const notScrolledClasses = ["py-4", "md:py-6"];

		const updateNavWrapperPosition = () => {
			const isOverThreshold = window.scrollY > SCROLL_THRESHOLD;

			// Determine which classes to add and remove based on scroll position
			const classesToAdd = isOverThreshold ? scrolledClasses : notScrolledClasses;
			const classesToRemove = isOverThreshold ? notScrolledClasses : scrolledClasses;

			// Remove classes
			classesToRemove.forEach((className) => {
				mainNav.classList.remove(className);
			});

			// Add classes
			classesToAdd.forEach((className) => {
				mainNav.classList.add(className);
			});
		};

		updateNavWrapperPosition(); // Initial

		const throttledUpdateNav = throttle(updateNavWrapperPosition, 20);
		window.addEventListener("scroll", throttledUpdateNav);
	});
</script>
