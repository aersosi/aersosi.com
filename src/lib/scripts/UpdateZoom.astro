<script>
  const ZOOM_TEXTS = {
    zoomIn: "Verkleinern",
    zoomOut: "Vergrößern",
  };

  const isZoomed = () => document.documentElement.classList.contains("zoom");

  const updateButtons = (zoomed) => {
    const text = zoomed ? ZOOM_TEXTS.zoomIn : ZOOM_TEXTS.zoomOut;

    document.querySelectorAll("[data-zoom-toggle]").forEach((button) => {
      button.setAttribute("aria-checked", zoomed.toString());
      button.setAttribute("aria-label", text);

      button.querySelector(".zoomIn")?.classList.toggle("hidden", !zoomed);
      button.querySelector(".zoomOut")?.classList.toggle("hidden", zoomed);

      const textEl = button.querySelector(".zoomText");
      if (textEl) textEl.textContent = text;
    });
  };

  const setZoom = (shouldZoom) => {
    document.documentElement.classList.toggle("zoom", shouldZoom);
    localStorage.setItem("zoom", shouldZoom.toString());
    updateButtons(shouldZoom);
  };

  const toggleZoom = () => setZoom(!isZoomed());

  setZoom(localStorage.getItem("zoom") === "true");

  document.querySelectorAll("[data-zoom-toggle]").forEach((button) => {
    button.addEventListener("click", () => toggleZoom);
  });

  document.addEventListener("keydown", (e) => {
    if (e.altKey && e.key === "z") {
      toggleZoom();
      e.preventDefault();
    }
  });
</script>
