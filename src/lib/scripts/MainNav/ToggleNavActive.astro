<script>
  import { normalizePath } from "../normalizePath";

  function updateActiveNav() {
    const hash = window.location.hash;
    const currentUrl = normalizePath(window.location.pathname) + hash;

    document.querySelectorAll("nav a.nav-link").forEach((link) => {
      const linkHref = normalizePath(link.getAttribute("href"));
      const isActive =
        linkHref === currentUrl ||
        linkHref === normalizePath(window.location.pathname) || // Ohne Hash abgleichen
        linkHref === hash;

      const inactiveButton = link.querySelector(".inactive");
      const activeButton = link.querySelector(".active");

      if (inactiveButton && activeButton) {
        inactiveButton.classList.toggle("hidden", isActive);
        activeButton.classList.toggle("hidden", !isActive);
      }
    });
  }

  updateActiveNav();
  window.addEventListener("hashchange", updateActiveNav);
  window.addEventListener("popstate", updateActiveNav);
</script>
