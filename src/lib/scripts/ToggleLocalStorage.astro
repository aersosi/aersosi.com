<script is:inline>
	(function () {
		// Get the saved theme from localStorage or system preference
		const theme =
			localStorage.getItem("theme") ||
			(window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");

		// Apply the theme immediately
		document.documentElement.classList.toggle("dark", theme === "dark");

		// Set the toggle state correctly based on the theme
		document.querySelectorAll("[data-theme-toggle]").forEach((button) => {
			button.setAttribute("aria-checked", theme ? "true" : "false");
		});
	})();
</script>
