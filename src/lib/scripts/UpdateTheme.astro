<script>
  function updateTheme(isDark) {
    document.documentElement.classList.toggle("dark", isDark);
    localStorage.setItem("theme", isDark ? "dark" : "light");
  }

  function initializeTheme() {
    const savedTheme = localStorage.getItem("theme");
    const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;

    const isDark = savedTheme !== null ? savedTheme === "dark" : systemPrefersDark;
    updateTheme(isDark);
  }

  initializeTheme();

  // Attach event listener to all theme toggles
  document.querySelectorAll("[data-theme-toggle]").forEach((button) => {
    button.addEventListener("click", () => {
      const isDark = document.documentElement.classList.contains("dark");
      updateTheme(!isDark);
    });
  });

  // Keyboard shortcut: Shift + Control + D for zoom toggle
  document.addEventListener("keydown", (event) => {
    if (event.shiftKey && event.ctrlKey && event.key === "D") {
      const isDark = document.documentElement.classList.contains("dark");
      updateTheme(!isDark);
      event.preventDefault();
    }
  });
</script>
